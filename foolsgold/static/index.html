<!DOCTYPE html>
<html>
  <head>
    <title>
      Foolsgold Ruby Rack in Rust Server Extravaganza
    </title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
  </head>
  <body>
    <div class="container my-2">
      <h1>Foolsgold Ruby Rack in Rust Server Extravaganza</h1>
      <p align="center">
        <a href="/fools-gold">
          <img
            class="mw-100"
            src="/img/resf.png"
            alt="Rust Evangelism Strike Force"
          />
        </a>
      </p>
      <h2>What Is This?</h2>
      <p>
        Foolsgold is a Rust webserver that executes a Ruby Rack application on
        an embedded mruby interpreter.
      </p>
      <p>
        The Rust webserver is Rocket, which is based on Hyper and Tokio. It is
        an incredibly fast, async webserver with statically typed route
        functions and typed, thread-safe shared state.
      </p>
      <p>
        Rust exposes a <code>RequestStats</code> class to the mruby interpreter
        that grants the Ruby code access to UUID V4 generation for request IDs
        and closes over a static <code>AtomicI64</code> request counter that is
        shared among all mruby interpreters, all requests, and all threads.
      </p>
      <p>
        The Rack application is defined with a <code>config.ru</code> which is
        executed in the context of a <code>Rack::Builder</code>.
      </p>
      <p>
        The Rack response tuple is translated to a Rocket HTTP response. This
        setup is similar to a threaded Unicorn with the difference that the
        execution model is shared nothing.
      </p>
    </div>
  </body>
</html>
